<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Galerie</title>
  <link rel="stylesheet" href="style.css">

  <!-- Font Awesome pour icônes -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
  <header>
    <div class="header-container">
      <a href="index.html" class="logo">
        <img src="images/logo.png" alt="Forgefeu Logo">
      </a>
      <nav>
        <ul>
          <li><a href="index.html">Accueil</a></li>
          <li><a href="galerie.html" class="active">Portfolio</a></li>
          <li><a href="boutique.html">Boutique</a></li>
          <li><a href="apropos.html">À propos</a></li>
          <li><a href="contact.html">Contact</a></li>
        </ul>
      </nav>
    </div>
  </header>
  
<main>  
  <section class="gallery-section">
      <h1>Galerie</h1>
  <nav>
    <div class="gallery-menu">
    <button data-tag="miniatures">Miniatures</button>
    <button data-tag="figurines">Figurines</button>
    <button data-tag="commissions">Commissions</button>
       </div>
  </nav>

<div class="gallery" id="gallery"></div>

     </main>
  
<!-- Lightbox -->
  <div id="lightbox" class="lightbox">
    <div class="lightbox-content">
      <img id="lightbox-img" src="" alt="">
      <span class="close">&times;</span>
      <a class="prev">&#10094;</a>
      <a class="next">&#10095;</a>
    </div>
  </div>

     <footer>
    <p class="footer-bottom">&copy; 2025 Forgefeu</p>
  </footer>

  <script src="gallery2.js"></script>

<!-- Script Masonry pour harmoniser les images -->
<script>
function applyMasonry() {
  const galleryItems = document.querySelectorAll('.gallery-item img');
  galleryItems.forEach(img => {
    if (img.complete) {
      const rowHeight = 1000; // doit correspondre à grid-auto-rows
      const rowSpan = Math.ceil(img.naturalHeight / rowHeight);
      img.parentElement.style.gridRowEnd = `span ${rowSpan}`;
    } else {
      img.addEventListener('load', () => {
        const rowHeight = 10;
        const rowSpan = Math.ceil(img.naturalHeight / rowHeight);
        img.parentElement.style.gridRowEnd = `span ${rowSpan}`;
      });
    }
  });
}

// Appliquer Masonry après chaque chargement d'image
document.addEventListener("DOMContentLoaded", () => {
  const galleryEl = document.getElementById('gallery');

  // Observer pour les images ajoutées dynamiquement
  const observer = new MutationObserver(() => {
    applyMasonry();
  });
  observer.observe(galleryEl, { childList: true, subtree: true });

  // Recalcule au redimensionnement
  window.addEventListener('resize', applyMasonry);

  // Trigger initial après un court délai pour s'assurer que lazy loading a commencé
  setTimeout(applyMasonry, 200);
});
</script>
  
</body>
</html>










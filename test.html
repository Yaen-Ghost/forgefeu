<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Galerie</title>
  <link rel="stylesheet" href="style.css">

  <!-- Font Awesome pour icônes -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
  <header>
    <div class="header-container">
      <a href="index.html" class="logo">
        <img src="images/logo.png" alt="Forgefeu Logo">
      </a>
      <nav>
        <ul>
          <li><a href="index.html">Accueil</a></li>
          <li><a href="galerie.html" class="active">Portfolio</a></li>
          <li><a href="boutique.html">Boutique</a></li>
          <li><a href="apropos.html">À propos</a></li>
          <li><a href="contact.html">Contact</a></li>
        </ul>
      </nav>
    </div>
  </header>
  
<main>  
  <section class="gallery-section">
      <h1>Galerie</h1>
  <nav>
    <div class="gallery-menu">
    <button onclick="loadGallery('miniatures')">Miniatures jeu de rôle</button>
    <button onclick="loadGallery('figurines')">Figurines</button>
    <button onclick="loadGallery('commissions')">Commissions</button>
       </div>
  </nav>

<div class="gallery" id="gallery"></div>

     </main>
  
<!-- Lightbox -->
  <div id="lightbox" class="lightbox">
    <span class="close">&times;</span>
    <div class="lightbox-content">
      <img id="lightbox-img" src="" alt="">
      <p id="lightbox-caption"></p>
      <a class="prev">&#10094;</a>
      <a class="next">&#10095;</a>
    </div>
  </div>

<script>
  const cloudName = "dx0mbjcva"; // ← remplace par ton cloud_name
  const gallery = document.getElementById("gallery");
  const lightbox = document.getElementById("lightbox");
  const lightboxImg = document.getElementById("lightbox-img");
  const lightboxCaption = document.getElementById("lightbox-caption");

  // Charger une galerie à partir d’un tag
  function loadGallery(tag) {
    gallery.innerHTML = "<p style='text-align:center'>Chargement...</p>";
    fetch(`https://res.cloudinary.com/${cloudName}/image/list/${tag}.json`)
      .then(res => res.json())
      .then(data => {
        gallery.innerHTML = "";
        data.resources.forEach(img => {
          const imgUrl = `https://res.cloudinary.com/${cloudName}/image/upload/w_600,q_auto,f_auto/${img.public_id}.${img.format}`;
          const fullUrl = `https://res.cloudinary.com/${cloudName}/image/upload/${img.public_id}.${img.format}`;
          const el = document.createElement("img");
          el.src = imgUrl;
          el.loading = "lazy"; // lazy loading
          el.alt = img.public_id.split("/").pop();
          el.addEventListener("click", () => openLightbox(fullUrl, el.alt));
          gallery.appendChild(el);
        });
      })
      .catch(err => {
        gallery.innerHTML = "<p style='color:red;text-align:center'>Erreur de chargement des images.</p>";
        console.error(err);
      });
  }

  // Ouvrir la lightbox
  function openLightbox(src, caption) {
    lightbox.style.display = "flex";
    lightboxImg.src = src;
    lightboxCaption.textContent = caption;
  }

  // Fermer la lightbox
  function closeLightbox() {
    lightbox.style.display = "none";
    lightboxImg.src = "";
  }

  // Charger une catégorie par défaut
  loadGallery("miniatures");
</script>

     <footer>
    <p class="footer-bottom">&copy; 2025 Forgefeu</p>
  </footer>
    
</body>
</html>
